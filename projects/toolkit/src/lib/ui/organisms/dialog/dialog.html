@if (isOpen()) {
  <div class="fixed inset-0 z-50 flex items-center justify-center p-4 overflow-hidden">
    <div class="fixed inset-0 bg-black/10 backdrop-blur-xs transition-opacity" (click)="close()"></div>

    <div [class]="'relative w-full mx-auto bg-white rounded-xl shadow-2xl flex flex-col transition-all transform ' + sizeClass()">
      
      @if (headerTmpl() || title()) {
        <div class="flex items-center justify-between p-4 border-b border-gray-100">
          <div class="flex-1">
            @if (headerTmpl()) {
              <ng-container [ngTemplateOutlet]="headerTmpl()!.template" />
            } @else {
              <h3 class="text-lg font-bold text-gray-800">{{ title() }}</h3>
            }
          </div>
          <button (click)="close()" class="p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-400">âœ•</button>
        </div>
      }

      @if (contentTmpl()) {
        <div class="relative p-6 flex-auto overflow-y-auto max-h-[80vh]">
          <ng-container [ngTemplateOutlet]="contentTmpl()!.template" [ngTemplateOutletContext]="{ $implicit: data() }" />
        </div>
      } @else {
        <div class="relative p-6 flex-auto">
          <ng-container #dynamicContent />
          <ng-content />
        </div>
      }


      @if (footerTmpl()) {
        <div class="flex items-center justify-end p-4 border-t border-gray-100 gap-3">
          <ng-container [ngTemplateOutlet]="footerTmpl()!.template" />
        </div>
      }
    </div>
  </div>
}